<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Auction House</title>

    <!-- Scripts -->
    <script type="text/javascript" src="../ExternalScripts/knockout.js"></script>
    <script type="text/javascript" src="../ExternalScripts/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../ExternalScripts/jqueryUI-1.10.0.js"></script>

    <script type="text/javascript" src="../Scripts/init.js"></script>
    <script type="text/javascript" src="../Scripts/models.js"></script>
    <script type="text/javascript" src="../Scripts/viewModels.js"></script>
    <script type="text/javascript" src="../Scripts/customBindings.js"></script>
    <script type="text/javascript" src="../Scripts/dummyserver.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" type="text/css" href="../Styles/main.css" />
    <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />

    <!--Templates-->
    <script type="text/html" id="placeBidTemplate">
        <label for="bid">Place your bid: </label>
        <input type="number" id="bid" min="0" step="10" data-bind="value: bid() >= minPrice ? bid() : minPrice"/>
        <button id="place_bid_button" class="btn" data-bind="click: $root.sendPlaceBid">Place bid</button>
    </script>

    <script type="text/html" id="loginTemplate">
        <label for="log_usern">Username: </label>
        <input type="text" id="log_usern" /> <br/>
        <label for="log_pass">Password: </label>
        <input type="password" id="log_pass"/>
        <button id="log_in_button" class="btn" data-bind="click: $root.sendLogIn">Log_in</button>
    </script>

    <script type="text/html" id="registerTemplate">
        <label for="firstname">Firstname: </label>
        <input type="text" id="firstname"/> <br/>
        <label for="lastname">Lastname: </label>
        <input type="text" id="lastname"/> <br/>
        <label for="adress">Adress: </label>
        <input type="text" id="adress"/> <br/>
        <label for="username">Username: </label>
        <input type="text" id="username"/> <br/>
        <label for="password">Password: </label>
        <input type="password" id="password"/> <br/>
        <button id="register_button" class="btn" data-bind="click: $root.sendRegister">Register</button>
    </script>

</head>
<body>

<div id="wrapper">

    <div id="header">
        <h1 class="welcome">Welcome to 1337 Auctions!</h1>
        <div class="logged_in_as"  data-bind="visible: $root.user() !== undefined">
            <span class="logged_in_as_label">Logged in as:</span> <br/>
            <span data-bind="text: user().username"></span>
        </div>
        <div class="log_in_register">
            <!--TODO: change to === here and the next a-->
            <a data-bind="visible: user() !== undefined, click: openLogin.bind($data, 'log_in')" href="">Log in</a>
            <br/>
            <a data-bind="visible: user() !== undefined, click: openRegister.bind($data, 'register')" href="">Register</a>
        </div>
        <div id="horizontalHeaderLine"></div>

        <div id="log_in" data-bind="jqDialog: log_in_options,
             template: { name: 'loginTemplate', data: log_in_action, if: log_in_action }, openDialog: log_in_action">
        </div>

        <div id="register" data-bind="jqDialog: register_options,
             template: { name: 'registerTemplate', data: register_action, if: register_action }, openDialog: register_action">
        </div>


    </div>

    <div id="itemViewModelWrapper">

        <div id="itemWrapper" data-bind="foreach: items">
            <div class="item">
                <div class="itemHeader">
                    <h2 data-bind="text: name"></h2>
                    <div id="horizontalItemHeaderLine"></div>
                </div>
                <div class="itemContent">
                    <div class="itemInfo">
                        <label>Itemnumber: </label><span data-bind="text: itemno"></span> <br/>
                        <label>Minumum price: </label><span data-bind="text: minPrice"></span> <br/>
                        <label data-bind="visible: bid() !== 0">Highest bid: </label>
                        <span data-bind="text: bid(), visible: bid() !== 0"></span> <br/>
                        <label>Expires </label><span data-bind="text: expires"></span> <br/>
                        <label data-bind="visible: bid() !== 0">Highest Bidder: </label> <br/>
                        <span data-bind="text: highestBidder(), visible: bid() !== 0"></span>
                    </div>
                    <div class="itemDescription">
                        <span data-bind="html: description"></span>
                    </div>
                    <div class="buttonBar">
                        <button class="bidButton btn" data-bind="click: $root.openPlaceBid">Place bid</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="place_bid" data-bind="jqDialog: placeBidOptions,
             template: { name: 'placeBidTemplate', data: selectedItem, if: selectedItem }, openDialog: selectedItem">
        </div>

    </div>


</div>

</body>
</html>